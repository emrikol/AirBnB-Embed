{"version":3,"file":"index.js","mappings":"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","sources":["webpack://airbnb-embed/./src/edit.js","webpack://airbnb-embed/./src/save.js","webpack://airbnb-embed/external window [\"wp\",\"blockEditor\"]","webpack://airbnb-embed/external window [\"wp\",\"blocks\"]","webpack://airbnb-embed/external window [\"wp\",\"components\"]","webpack://airbnb-embed/external window [\"wp\",\"element\"]","webpack://airbnb-embed/external window [\"wp\",\"i18n\"]","webpack://airbnb-embed/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://airbnb-embed/webpack/bootstrap","webpack://airbnb-embed/webpack/runtime/compat get default export","webpack://airbnb-embed/webpack/runtime/define property getters","webpack://airbnb-embed/webpack/runtime/hasOwnProperty shorthand","webpack://airbnb-embed/webpack/runtime/make namespace object","webpack://airbnb-embed/./src/index.js"],"sourcesContent":["import { TextControl, ToggleControl } from '@wordpress/components';\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps, InspectorControls } from '@wordpress/block-editor';\nimport { PanelBody } from '@wordpress/components';\n\nconst Edit = ({ attributes, setAttributes }) => {\n\tconst { listingId, url, hideReviews, hidePrice, width, height, autoInit } = attributes;\n\tconst [pasteData, setPasteData] = useState(null);\n\tconst [embedCode, setEmbedCode] = useState('');\n\n\tconst handlePaste = (event) => {\n\t\tconst { clipboardData } = event;\n\t\tconst pastedText = clipboardData.getData('text');\n\t\tconst regex = /^https:\\/\\/www\\.airbnb\\.com\\/rooms\\/([0-9]+)\\??.*$/;\n\t\tconst match = pastedText.match(regex);\n\t\tif (match) {\n\t\t\tsetPasteData(match[0]);\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\t// Convert Airbnb URL to embed code\n\t\tconst regex = /^https:\\/\\/www\\.airbnb\\.com\\/rooms\\/([0-9]+)\\??.*$/;\n\t\tconst match = url.match(regex);\n\t\tif (match) {\n\t\t\tconst id = match[1];\n\t\t\tconst dataAttrs = {};\n\t\t\tif (hideReviews) dataAttrs['data-hide-reviews'] = 'true';\n\t\t\tif (hidePrice) dataAttrs['data-hide-price'] = 'true';\n\t\t\tif (autoInit) dataAttrs['data-auto-init'] = 'true';\n\t\t\tconst embed = (\n\t\t\t\t<div className=\"airbnb-embed-frame\" data-id={id} data-view=\"home\" style={{ width, height, margin: 'auto' }} {...dataAttrs}>\n\t\t\t\t\t<a href={`https://www.airbnb.com/rooms/${id}`} target=\"_blank\" rel=\"nofollow noopener\"></a>\n\t\t\t\t\t<script async src=\"https://www.airbnb.com/embeddable/airbnb_jssdk\"></script>\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tsetEmbedCode(embed);\n\t\t\tsetAttributes({ listingId: id });\n\t\t} else {\n\t\t\tsetEmbedCode('');\n\t\t}\n\t}, [url, hideReviews, hidePrice, width, height, autoInit]);\n\tuseEffect(() => {\n\t\tif (embedCode) {\n\t\t\twindow.AirbnbAPI && window.AirbnbAPI.bootstrap();\n\t\t}\n\t}, [embedCode]);\n\n\tconst onChange = (field) => (newValue) => {\n\t\tsetAttributes({ [field]: newValue });\n\t\tsetEmbedCode('');\n\t};\n\n\tconst blockProps = useBlockProps({\n\t\tonPaste: handlePaste,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<TextControl\n\t\t\t\tlabel={__('Airbnb URL')}\n\t\t\t\tvalue={url}\n\t\t\t\tonChange={onChange('url')}\n\t\t\t/>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Airbnb Embed Settings')}>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Hide Reviews')}\n\t\t\t\t\t\tchecked={hideReviews}\n\t\t\t\t\t\tonChange={onChange('hideReviews')}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Hide Price')}\n\t\t\t\t\t\tchecked={hidePrice}\n\t\t\t\t\t\tonChange={onChange('hidePrice')}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div {...blockProps}>\n\t\t\t\t{embedCode}\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default Edit;\n","const { __ } = wp.i18n;\n\nconst Save = ({ attributes }) => {\n\tconst { listingId, url, hideReviews, hidePrice, width, height, autoInit } = attributes;\n\t\tconst dataAttrs = {};\n\tif (hideReviews) {\n\t\tdataAttrs['data-hide-reviews'] = 'true';\n\t}\n\tif (hidePrice) {\n\t\tdataAttrs['data-hide-price'] = 'true';\n\t}\n\tif (autoInit) {\n\t\tdataAttrs['data-auto-init'] = 'true';\n\t}\n\n\tconst embedCode = (\n\t<div className = \"airbnb-embed-frame\" data-id={listingId} data-view=\"home\" style={{ width, height, margin: 'auto' }} {...dataAttrs}>\n\t\t<a href = {`https://www.airbnb.com/rooms/${listingId}`} target=\"_blank\" rel=\"nofollow noopener\"></a>\n\t\t<script async src=\"https://www.airbnb.com/embeddable/airbnb_jssdk\"></script>\n\t</div>\n\t);\n\n\treturn embedCode;\n};\n\nexport default Save;\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import edit from './edit';\nimport save from './save';\n\nconst { __ } = wp.i18n;\nconst { registerBlockType } = wp.blocks;\nimport { createBlock } from '@wordpress/blocks';\n\nexport const URL_REGEX = /^https:\\/\\/www\\.airbnb\\.com\\/rooms\\/([0-9]+)\\??.*$/;\n\nregisterBlockType( 'emrikol/airbnb-embed', {\n    title: __( 'Airbnb Embed' ),\n    icon: 'universal-access-alt',\n    category: 'embed',\n    attributes: {\n        listingId: {\n            type: 'string',\n            default: '',\n        },\n        url: {\n            type: 'string',\n            default: '',\n        },\n        hideCta: {\n            type: 'boolean',\n            default: false,\n        },\n        hidePrice: {\n            type: 'boolean',\n            default: false,\n        },\n        hideDescription: {\n            type: 'boolean',\n            default: false,\n        },\n        hideTitle: {\n            type: 'boolean',\n            default: false,\n        },\n        hideHost: {\n            type: 'boolean',\n            default: false,\n        },\n        width: {\n            type: 'string',\n            default: '100%',\n        },\n        height: {\n            type: 'string',\n            default: '600px',\n        },\n        autoInit: {\n            type: 'boolean',\n            default: false,\n        },\n    },\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'raw',\n\t\t\t\tisMatch: node => node.nodeName === 'P' && URL_REGEX.test( node.textContent ),\n\t\t\t\ttransform: node => {\n\t\t\t\t\treturn createBlock( 'emrikol/airbnb-embed', {\n\t\t\t\t\t\turl: node.textContent.trim(),\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n    edit,\n    save,\n} );\n"],"names":["TextControl","ToggleControl","useState","useEffect","__","useBlockProps","InspectorControls","PanelBody","Edit","_ref","attributes","setAttributes","listingId","url","hideReviews","hidePrice","width","height","autoInit","pasteData","setPasteData","embedCode","setEmbedCode","handlePaste","event","clipboardData","pastedText","getData","regex","match","preventDefault","id","dataAttrs","embed","createElement","_extends","className","style","margin","href","target","rel","async","src","window","AirbnbAPI","bootstrap","onChange","field","newValue","blockProps","onPaste","Fragment","label","value","title","checked","wp","i18n","Save","edit","save","registerBlockType","blocks","createBlock","URL_REGEX","icon","category","type","default","hideCta","hideDescription","hideTitle","hideHost","transforms","from","isMatch","node","nodeName","test","textContent","transform","trim"],"sourceRoot":""}